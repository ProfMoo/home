plugins: discogs fetchart bandcamp embedart spotify duplicates yearfixer extrafiles

threaded: yes

# NOTE: This assumes that the music directory is mounted here
directory: /music
library:  /music/beets.db
asciify_paths: true

import:
  write: yes
  duplicate_action: skip
  autotag: yes
  resume: yes
  quiet: yes
  incremental: yes
  incremental_skip_later: no
  # TURN THIS ON WHEN READY
  # move: yes
  log: log.txt

max_filename_length: 255

# Removing characters that could cause issues on filesystem or on S3
replace:
  '[\\/]': _
  '^\.': _
  '[\x00-\x1f]': _
  '[<>:"\?\*\|]': _
  '\.$': _
  '\s+$': ''
  '^\s+': ''
  '^-': _
  '[\[\{]' : (
  '[\]\}]' : )
  '[\^\%\`\~#]' : _

extrafiles:
    patterns:
        all: '*.*'

match:
    strong_rec_thresh: 0.10

# Plugins for additional identification
discogs:
  user_token: dkVyfeemJydxHxvQxAcTWMGHsAvfAwvAKwVuEXTn
  source_weight: 0.0
  extra_tags: [year]

spotify:
  source_weight: 0.7

bandcamp:
  include_digital_only_tracks: true
  search_max: 5
  art: yes

fetchart:
  auto: yes                  # Enable automatic album art fetching during import.
  cautious: no               # Pick only trusted album art by ignoring filenames that do not contain one of the keywords in "cover_names".
  enforce_ratio: yes         # Only allow images with 1:1 aspect ratio
  minwidth: 1000             # Only images with a width bigger or equal to minwidth are considered as valid album art candidates.
  maxwidth: 3000             # A maximum image width to downscale fetched images if they are too big.
                             # The height is recomputed so that the aspect ratio is preserved.
  sources:                   # An asterisk * expands to all available sources.
    - filesystem             # No remote art sources are queried if local art is found in the filesystem.
    - coverart
    - albumart
    - fanarttv
    - bandcamp
  store_source: yes          # Store the art source (e.g. filesystem) in the beets database as art_source.

embedart:
  compare_threshold: 20

# Preferring the higher bitrate
duplicates:
  tiebreak:
   items: [bitrate]
