version: "3.7"

services:
  qbittorrent:
    build: .
    ports:
      - "8080:8080"
    environment:
      # NOTE: RED_API_KEY is populated from a .env file
      - RED_API_KEY=${RED_API_KEY}
      - ORIGIN_TRACKER=red
      - PUID=1000
      - PGID=1000
      - UMASK=002
      - TZ=Etc/UTC
    volumes:
      - ./config:/config
      # The two volumes below correspond to:
      # 1. The location where qBittorrent will search for the torrent files
      # 2. The location where qBittorrent will place the downloaded music files
      # If you change these locations inside the docker container, you must also change the config file
      - /mnt/x/torrent-files:/torrent-files
      - /mnt/x/pre-process:/downloads
      # Loading in the post-download scripts
      - ./scripts:/scripts
