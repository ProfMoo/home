version: "3.9"
services:
  qbittorrent:
    # NOTE: We set the user to root to ensure qBittorrent has the proper permissions to monitor to folder
    # for new torrents
    build: .
    ports:
      - 8080:8080
      - 6881:6881
      - 6881:6881/udp
    environment:
      # NOTE: RED_API_KEY is populated from a .env file
      RED_API_KEY: ${RED_API_KEY}
      ORIGIN_TRACKER: red
      PUID: 911
      PGID: 911
      TZ: Etc/UTC
      WEBUI_PORT: 8080
    volumes:
      # All the files on disk that qBittorrent uses to function. Includes configuration, cache, logs, etc.
      - ./config:/config
      # Contains the post-download scripts
      - ./scripts:/scripts
