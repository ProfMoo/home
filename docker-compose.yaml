version: '3.8'

services:
  beets:
    volumes:
      - ${MUSIC_DOWNLOAD_DIR}:/downloads
      - ${MUSIC_LIBRARY_DIR}:/music
      - ${BEETS_DIR}:/beets
      - ${BETANIN_DIR}/data:/b/.local/share/betanin/
      - ${BETANIN_DIR}/config:/b/.config/betanin/
    extends:
      file: beets/docker-compose.yaml
      service: beets
  qbittorrent:
    volumes:
      # If you change these locations inside the docker container, you must also change the config file
      - ${INPUT_TORRENT_DIR}:/input
      - ${DOWNLOAD_DIR}:/downloads
      # NOTE: This needs to be mounted at this precise location because that's where qBittorrent looks for the files
      # TODO: Figure out if I can configure qBittorrent where to look for these torrents
      - ${ACTIVE_TORRENTS}:/config/qBittorrent/BT_backup
      - ${IN_PROGRESS_TORRENTS}:/tmp
    extends:
      file: qBittorrent/docker-compose.yaml
      service: qbittorrent
  qbitmanage:
    volumes:
      # If you change these locations inside the docker container, you must also change the config file
      - ${ACTIVE_TORRENTS}:/active-torrents
      - ${MUSIC_DOWNLOAD_DIR}:/downloads/music
      - ${MOVIES_DOWNLOAD_DIR}:/downloads/movies
    extends:
      file: qBittorrent/docker-compose.yaml
      service: qbitmanage
    depends_on:
      - qbittorrent
  jellyfin:
    extends:
      file: jellyfin/docker-compose.yaml
      service: jellyfin
  feishin:
    extends:
      file: feishin/docker-compose.yaml
      service: feishin
    depends_on:
      - jellyfin
  homepage:
    extends:
      file: homepage/docker-compose.yaml
      service: homepage
  prowlarr:
    extends:
      file: prowlarr/docker-compose.yaml
      service: prowlarr
  crossseed:
    extends:
      file: cross-seed/docker-compose.yaml
      service: cross-seed
    depends_on:
      - qbittorrent
      - prowlarr
